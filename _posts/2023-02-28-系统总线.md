---
title: 系统总线
date: 2023-02-28 09:03:02 +0800
categories: [Course, 计算机组成原理]
math: true
mermaid: true
---


## 2.1 总线的基本概念

- 部件连接方式：分散连接和总线连接
- 总线结构
  - 单总线结构
  - 面向CPU的双总线结构
  - 以存储器为中心的双总线结构

## 2.2 总线的分类

> 按照连接部件的不同
{: .prompt-info }

1. 片内总线
    - 芯片内部的总线
2. 系统总线
    - 计算机各部件之间的信息传输线
    - |系统总线类型|传输方向|解释|
      |:--:|:--:|:--:|
      |**数据总线**|双向|其位数与机器字长、存储字长有关|
      |**地址总线**|单向|与存储地址、I/O地址有关
      |**控制总线**|有出有入|例如：存储器读、存储器写、总线允许、中断确认；中断请求、总线请求|
3. 通信总线
    - 用于计算机系统之间或计算机系统与其他系统
    - |传输方式|特点|
      |:--:|:--:|
      |串行通信|适宜远距离传输（几米到数千千米）|
      |并行通信|适宜近距离传输（通常小于30米）|


## 2.3 总线特性及性能指标

![总线结构的物理实现](/assets/img/posts/Course/计算机组成原理/总线结构的物理实现.png "总线结构的物理实现")

### 总线特性

|特性|说明|
|:--:|:--:|
|机械特性|尺寸、形状、管脚数及排列顺序|
|电气特性|传输方向和有效的电平范围|
|功能特性|每根传输线的功能|
|时间特性|信号的时序关系|

### 总线的性能指标

|指标|说明|
|:--:|:--:|
|总线宽度|数据线的根数|
|总线带宽|每秒传输的最大字节数（MBps）|
|时钟同步/异步|顾名思义|
|总线复用|地址线与数据线复用|
|信号线数|地址线、数据线和控制线的总和|
|总线控制方式|突发工作、自动配置、仲裁、逻辑、计数|
|其他指标|负载能力、电源电压……|

### 总线标准

|总线标准|数据线|总线时钟|
|:--:|:--:|:--:|
|ISA|16|8MHz（独立）|
|EISA|32|8MHz（独立）|
|VESA(VL-BUS)|32|32MHz（<u>CPU</u>）|
|**PCI**|32<br>64|33MHz（独立）<br>66MHz（独立）|
|AGP|32|66.7MHz（独立）<br>133MHz（独立）|
|**RS-232**|串行总线|数据终端设备（计算机）和数据通信设备（调制解调器）之间的标准接口|
|**USB通用串行总线**|串行总线|即插即用……|


## 2.4 总线结构

### 单总线结构

- 不允许两个以上的部件在用一时刻向总线传输信息
- 效率低下

### 多总线结构

- 双总线结构
    - ![双总线结构](/assets/img/posts/Course/计算机组成原理/双总线结构.png "双总线结构")
- 三总线结构
  - ![三总线结构](/assets/img/posts/Course/计算机组成原理/三总线结构.png "三总线结构")
- 三总线结构的又一形式
  - ![三总线结构的又一形式](/assets/img/posts/Course/计算机组成原理/三总线结构的又一形式.png "三总线结构的又一形式")
- 四总线结构
  - ![四总线结构](/assets/img/posts/Course/计算机组成原理/四总线结构.png "四总线结构")


## 2.5 总线控制

|模块|解释|
|:--:|:--:|
|主设备|对总线有控制权|
|从设备|响应从主设备发来的总线命令，对总线没有控制权|

### 判优控制

- 集中式
  - 链式查询
    - 离总线最近设备具有最高优先级
  ![链式查询](/assets/img/posts/Course/计算机组成原理/链式查询.png "链式查询")
  - 计数器定时查询
    - 优先级相等
  ![计数器定时查询](/assets/img/posts/Course/计算机组成原理/计数器定时查询.png "计数器定时查询")
  - 独立请求方式
    - 响应速度很快，优先次序控制灵活（通过程序改变）
  ![独立请求方式](/assets/img/posts/Course/计算机组成原理/独立请求方式.png "独立请求方式")

- 分布式
  - 将总线控制逻辑分布在连接到总线的各个部件中
  ![分布式控制](/assets/img/posts/Course/计算机组成原理/分布式控制.png "分布式控制")

### 通信控制

- 总线传输周期

  |阶段|说明|
  |:--:|:--:|
  |申请分配阶段|主模块申请，总线仲裁决定|
  |寻址阶段|主模块向从模块给出地址和命令|
  |传数阶段|主模块和从模块交换数据|
  |结束阶段|主模块撤销有关信息|

> 注：对于仅有一个主模块的系统，无须申请、分配和撤除
{: .prompt-info }

1. **同步通信**
    - 由<u>统一时标</u>控制数据传送
    - 各部件速度不同，必须按最慢速度的部件来设计公共时钟，影响效率
2. **异步通信**
    - 采用应答方式，没有公共时钟标准
  ![异步通信](/assets/img/posts/Course/计算机组成原理/异步通信.png "异步通信")
  
3. **半同步通信**
    - 同步、异步结合（增设一条“等待”响应信号WAIT）
- 前三者共同点

  |流程|总线情况|
  |:--:|:--:|
  |主模块发地址、命令|占用总线|
  |从模块准备数据|总线空闲|
  |从模块向主模块发数据|占用总线|
  
4. **分离式通信**
    - 分成两个子周期

      |周期|说明|
      |:--:|:--:|
      |子周期1|主模块申请占用总线，使用完后即放弃总线的使用权|
      |子周期2|从模块申请占用总线（此时也可看成是主模块），将各种信息送至总线上|
      
    - 各模块准备数据时，不占用总线；与此同时，总线不空闲
